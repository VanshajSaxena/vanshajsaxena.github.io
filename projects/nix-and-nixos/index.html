<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Nix and NixOS | @vanshaj.xyz</title>
<meta name="keywords" content="">
<meta name="description" content="
NixOS is a GNU/Linux distribution that focuses on
reproducibility, declarative configuration, and robust package management.
If you have ever used GNU/Linux Operating System you must know a large part of
maintaining an installation of a Linux Distribution is having to edit some
configuration files.
The GNU/Linux Operating System is so malleable that you can break it into
pieces of independent software and put them back together in a different way,
and it would work if done correctly. But this power comes with the
responsibility of having to manage the complexity of the underlying system.">
<meta name="author" content="Vanshaj Saxena">
<link rel="canonical" href="https://vanshaj.xyz/projects/nix-and-nixos/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.93136e615bbd402e658a23a5354e78ce30f8e635b6205867ded73de10cc039e4.css" integrity="sha256-kxNuYVu9QC5liiOlNU54zjD45jW2IFhn3tc94QzAOeQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://vanshaj.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://vanshaj.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://vanshaj.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://vanshaj.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://vanshaj.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://vanshaj.xyz/projects/nix-and-nixos/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://vanshaj.xyz/projects/nix-and-nixos/">
  <meta property="og:site_name" content="@vanshaj.xyz">
  <meta property="og:title" content="Nix and NixOS">
  <meta property="og:description" content=" NixOS is a GNU/Linux distribution that focuses on reproducibility, declarative configuration, and robust package management.
If you have ever used GNU/Linux Operating System you must know a large part of maintaining an installation of a Linux Distribution is having to edit some configuration files.
The GNU/Linux Operating System is so malleable that you can break it into pieces of independent software and put them back together in a different way, and it would work if done correctly. But this power comes with the responsibility of having to manage the complexity of the underlying system.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nix and NixOS">
<meta name="twitter:description" content="
NixOS is a GNU/Linux distribution that focuses on
reproducibility, declarative configuration, and robust package management.
If you have ever used GNU/Linux Operating System you must know a large part of
maintaining an installation of a Linux Distribution is having to edit some
configuration files.
The GNU/Linux Operating System is so malleable that you can break it into
pieces of independent software and put them back together in a different way,
and it would work if done correctly. But this power comes with the
responsibility of having to manage the complexity of the underlying system.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Projects",
      "item": "https://vanshaj.xyz/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Nix and NixOS",
      "item": "https://vanshaj.xyz/projects/nix-and-nixos/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Nix and NixOS",
  "name": "Nix and NixOS",
  "description": " NixOS is a GNU/Linux distribution that focuses on reproducibility, declarative configuration, and robust package management.\nIf you have ever used GNU/Linux Operating System you must know a large part of maintaining an installation of a Linux Distribution is having to edit some configuration files.\nThe GNU/Linux Operating System is so malleable that you can break it into pieces of independent software and put them back together in a different way, and it would work if done correctly. But this power comes with the responsibility of having to manage the complexity of the underlying system.\n",
  "keywords": [
    
  ],
  "articleBody": " NixOS is a GNU/Linux distribution that focuses on reproducibility, declarative configuration, and robust package management.\nIf you have ever used GNU/Linux Operating System you must know a large part of maintaining an installation of a Linux Distribution is having to edit some configuration files.\nThe GNU/Linux Operating System is so malleable that you can break it into pieces of independent software and put them back together in a different way, and it would work if done correctly. But this power comes with the responsibility of having to manage the complexity of the underlying system.\nNixOS gives the user the power to handle this complexity in a declarative way. NixOS does this with the use of its purely functional package manager, Nix.\nNix Nix is a powerful package manager for Linux and other Unix systems that makes package management reliable and reproducible.\nSo if you have ever used a package manager like npm, it maintains a lock file that tracks the exact version of the packages you are using in your project. This is to ensure that the project will work the same way on different machines.\nIn a similar fashion Nix Flakes provide a standard way to write Nix expressions (and therefore packages) whose dependencies are version-pinned in a lock file, improving reproducibility of Nix installations.\nBelow is an example of a really simple Nix Flake:\n{ description = \"A Simple Nix Flake\"; outputs = { self }: { packages.x86_64-linux.hello = with import {}; hello; }; } Nix Flakes are still and experimental feature in Nix Package Manager, but they are slowly moving towards stability.\nNixOS I faced this problem of traditionally managing the state (packages) of my Linux System imperatively. This caused conflicts and inconsistencies in my environment in various ways. Also I never knew what state of my system is leading to an issue. It is very hard to pin point it, when you build you system imperatively rather than declaratively.\nvanshaj@NIXOS /etc/nixos $ lt drwxr-xr-x - root 26 Jul 2024 . lrwxrwxrwx - root 26 Jul 2024 ├── configuration.nix -\u003e /home/vanshaj/nixos/configuration.nix lrwxrwxrwx - root 26 Jul 2024 ├── flake.lock -\u003e /home/vanshaj/nixos/flake.lock lrwxrwxrwx - root 26 Jul 2024 ├── flake.nix -\u003e /home/vanshaj/nixos/flake.nix lrwxrwxrwx - root 26 Jul 2024 ├── hardware-configuration.nix -\u003e /home/vanshaj/nixos/hardware-configuration.nix lrwxrwxrwx - root 26 Jul 2024 └── home.nix -\u003e /home/vanshaj/nixos/home.nix Now, whenever there is a problem in the system you could literally git bisect your system configuration like a traditional software.\nHere is the source code for anyone interested in nerding out.\n",
  "wordCount" : "417",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "Vanshaj Saxena"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://vanshaj.xyz/projects/nix-and-nixos/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "@vanshaj.xyz",
    "logo": {
      "@type": "ImageObject",
      "url": "https://vanshaj.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://vanshaj.xyz/" accesskey="h" title="@vanshaj.xyz (Alt + H)">@vanshaj.xyz</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://vanshaj.xyz/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://vanshaj.xyz/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://vanshaj.xyz/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://vanshaj.xyz/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://vanshaj.xyz/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://vanshaj.xyz/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://vanshaj.xyz/">Home</a>&nbsp;»&nbsp;<a href="https://vanshaj.xyz/projects/">Projects</a></div>
    <h1 class="post-title entry-hint-parent">
      Nix and NixOS
    </h1>
    <div class="post-meta">Vanshaj Saxena

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#nix" aria-label="Nix">Nix</a></li>
                <li>
                    <a href="#nixos" aria-label="NixOS">NixOS</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><hr>
<p><a href="https://nixos.org/">NixOS</a> is a GNU/Linux distribution that focuses on
reproducibility, declarative configuration, and robust package management.</p>
<p>If you have ever used GNU/Linux Operating System you must know a large part of
maintaining an installation of a Linux Distribution is having to edit some
configuration files.</p>
<p>The GNU/Linux Operating System is so malleable that you can break it into
pieces of independent software and put them back together in a different way,
and it would work if done correctly. But this power comes with the
responsibility of having to manage the complexity of the underlying system.</p>
<p><strong>NixOS</strong> gives the user the power to handle this complexity in a declarative
way. NixOS does this with the use of its <strong>purely functional package manager</strong>,
<strong>Nix</strong>.</p>
<hr>
<h3 id="nix">Nix<a hidden class="anchor" aria-hidden="true" href="#nix">#</a></h3>
<p>Nix is a powerful package manager for Linux and other Unix systems that makes
package management reliable and reproducible.</p>
<p>So if you have ever used a package manager like npm, it maintains a lock file
that tracks the exact version of the packages you are using in your project.
This is to ensure that the project will work the same way on different
machines.</p>
<p>In a similar fashion <a href="https://nixos.wiki/wiki/flakes">Nix Flakes</a> provide a
standard way to write Nix expressions (and therefore packages) whose
dependencies are version-pinned in a lock file, improving reproducibility of
Nix installations.</p>
<p>Below is an example of a really simple Nix Flake:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;A Simple Nix Flake&#34;</span>;
</span></span><span style="display:flex;"><span>  outputs <span style="color:#f92672">=</span> { self }: {
</span></span><span style="display:flex;"><span>    packages<span style="color:#f92672">.</span>x86_64-linux<span style="color:#f92672">.</span>hello <span style="color:#f92672">=</span> <span style="color:#66d9ef">with</span> <span style="color:#f92672">import</span> <span style="color:#e6db74">&lt;nixpkgs&gt;</span> {}; hello;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Nix Flakes are still and experimental feature in Nix Package Manager, but they
are slowly moving towards stability.</p>
<hr>
<h3 id="nixos">NixOS<a hidden class="anchor" aria-hidden="true" href="#nixos">#</a></h3>
<p>I faced this problem of traditionally managing the state (packages) of my Linux
System imperatively. This caused conflicts and inconsistencies in my
environment in various ways. Also I never knew what state of my system is
leading to an issue. It is very hard to pin point it, when you build you system
imperatively rather than declaratively.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>vanshaj@NIXOS /etc/nixos $ lt
</span></span><span style="display:flex;"><span>drwxr-xr-x     - root <span style="color:#ae81ff">26</span> Jul  <span style="color:#ae81ff">2024</span>  .
</span></span><span style="display:flex;"><span>lrwxrwxrwx     - root <span style="color:#ae81ff">26</span> Jul  <span style="color:#ae81ff">2024</span>  ├── configuration.nix -&gt; /home/vanshaj/nixos/configuration.nix
</span></span><span style="display:flex;"><span>lrwxrwxrwx     - root <span style="color:#ae81ff">26</span> Jul  <span style="color:#ae81ff">2024</span>  ├── flake.lock -&gt; /home/vanshaj/nixos/flake.lock
</span></span><span style="display:flex;"><span>lrwxrwxrwx     - root <span style="color:#ae81ff">26</span> Jul  <span style="color:#ae81ff">2024</span>  ├── flake.nix -&gt; /home/vanshaj/nixos/flake.nix
</span></span><span style="display:flex;"><span>lrwxrwxrwx     - root <span style="color:#ae81ff">26</span> Jul  <span style="color:#ae81ff">2024</span>  ├── hardware-configuration.nix -&gt; /home/vanshaj/nixos/hardware-configuration.nix
</span></span><span style="display:flex;"><span>lrwxrwxrwx     - root <span style="color:#ae81ff">26</span> Jul  <span style="color:#ae81ff">2024</span>  └── home.nix -&gt; /home/vanshaj/nixos/home.nix
</span></span></code></pre></div><p>Now, whenever there is a problem in the system you could literally <code>git bisect</code>
your system configuration like a traditional software.</p>
<p>Here is the <a href="https://github.com/VanshajSaxena/nixos-config">source code</a> for anyone interested in nerding out.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
